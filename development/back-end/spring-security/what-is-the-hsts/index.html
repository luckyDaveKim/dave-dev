<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.24.57"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="canonical" href="https://luckydavekim.github.io/development/back-end/spring-security/what-is-the-hsts" data-baseprotocol="https:" data-basehost="luckydavekim.github.io"/><title data-react-helmet="true">HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정</title><link data-react-helmet="true" rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAlVQTFRFAAAAAAAAAAAAAAAAAQEBCQkJDAwMCwsLBwcHAgICCgoKgYGBtbW1srKyr6+vo6Ojjo6OcHBwTU1NKSkpDQ0NDg4Oubm5/////Pz88/Pz3d3ds7OzeHh4Nzc35eXlqqqqVVVVExMT8vLyT09P7e3tmJiYKioq/v7+zc3NUlJSBgYG5+fncnJy9vb29PT0+vr6hISEDw8P9fX1enp6SEhISkpKUFBQYmJigoKCq6ur19fXhoaG8PDwQ0NDJCQkWlpap6en6OjodXV1REREQUFBpKSk8fHx6enpV1dXXl5e09PT0tLSLy8vMjIytra2/f39oaGhISEhEBAQAwMDICAgv7+/GRkZiIiIwMDAvr6+urq6ra2tjY2NW1tbBAQEzs7O9/f3Y2NjJSUlVlZWuLi4EhISysrKmZmZRkZGNjY24ODgioqKl5eXxMTEFhYWKCgoSUlJ7+/v6urqOjo6iYmJGBgYx8fH+fn57u7u2dnZBQUFdHR0PT09Pz8/R0dHeXl51tbWZWVlampq+/v7CAgIPDw81NTUmpqaS0tLcXFx6+vrFRUV7OzsMTEx5ubmzMzMQEBAxsbGFBQUfX19Ozs7xcXF39/flJSUWVlZYWFh5OTkXV1db29v+Pj40dHRIyMjnZ2dhYWFfHx8HR0dHx8fU1NTNTU12traoqKiPj4+t7e3aGhoFxcXZmZmrq6uoKCgk5OTLS0tMDAwvLy8TExMycnJkZGRdnZ24eHhWFhYu7u7f39/w8PDbm5uXFxcGxsbnJycOTk51dXVkJCQnp6elpaWh4eH1XLXrgAAAAN0Uk5T6erWl2RDdgAAAAFiS0dEFwvWmI8AAAAJcEhZcwAALiMAAC4jAXilP3YAAANgSURBVGje7djpWxJBHAdwbFZUssxCVzMtgVoF0bADtbxKMc2rzExLozzyyA4VMSQrpSwtK7PMzLLT7vu2zM6/Kx9mFkG5Bmd7td93M7u/+TA7O+yzKxAAbiPgAR7gAR7gAR7gAc8AylvoTnx8/TwERPP9F7iRhQGLAhcvEVP4QFAw7WZCQpeGLQsXcgeYkYjlKyK5BKYi8ZeKOAVoWrZyFbcAzURFyzkFaFoRI8QFGKXEWWLjGNuVWK3CBOLXrF3nJOvVCYlJSitBuUGIB2xMBs5DiVJS09KnhdBNcjxgM3Adn4xMjUXI2kIeAECcnWMRtuZyAAAqL7+AFQqDOAAA2JbICppUfIASbrcXlahoumRHGDuF4p3YgKhkV6mdlO3eU55Swdbk7kWAdh82IM53tHm1OQn72cdBpQx1VlWTA6b+q2ukaBKiA6hLVksSoOkINRLq6lFPQxFRgI6IhlXyg6ij8RBZgI46DMuOHIXtpmbCANMCL5KuFbb1ag8BRtJmHU0IKxyDTzMDe41aKM+A+Hbjcat0nDiJBtSfgnWdXbCdZvIM0My4/6jTZ5DQbTB3nA2FzTKVh0DHzBPPoZ9cBf/hmntgs7WXFGA8bzPihT7YvKgjBVxqg0cu95ubeaQBvyvoRvIXm9sDaEJX+8ksskF6DS3yINwI0libJcEGlCXXy60yNHgDja8dhnU30YQyfT0D6LgR6+gZdqPdum0+Tz6K2nc83GiO0nUXvojcQ8+ckWFAFii+D8seoH3W95AsMJYBq0SPUEdpJFEgSYqueIYCdjAJFEFA6z+AhlOloa6sxwAXeOJg9AJZ8dNnqIZ6jlaAfhGEC5jaAwrt5OWrmORey9UwjqHxJZUAFwAGX3uRF1mVvG5kpxVWjQ+4zpu37PhN72YdnDtQUfvesiwfvMkDuo+fLOvemDL7+NwAqvfzlxHL+PUdAAtw9Qol7w9vLw21DE/3qIuwAGVD9pCTdI6PflV0We2LtkBfgAXQXXpnCWFs913TNxPABLAyNuHgVZ8MEBdsdPR5ighQP/7d4a0wd4BRTP4wAM4A7c9fRm8AOAEKlOk13RMpBgDwAFPM70k38udvTGWdTg5cxc530wqDO6lw+b3RIUA2PMADPMADPMAD/wfw4hqY5yXgNP8ALBgJZnoPhY8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDctMjFUMDY6MTY6MjArMDA6MDDKKOA1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTA3LTIxVDA2OjE2OjIwKzAwOjAwu3VYiQAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE0LTA1LTEyIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ9yG7QAAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADE5Mg8AcoUAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTky06whCAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTYzNjg5NzgwmrIrZwAAAA90RVh0VGh1bWI6OlNpemUAMEJClKI+7AAAAFZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL21udGxvZy9mYXZpY29ucy8yMDE5LTA3LTIxL2Q1NTQzN2VlYjIwZDY4YWZlY2NiODg3OTg1NjBiYmVkLmljby5wbmfqqZrkAAAAAElFTkSuQmCC" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="HSTS(HTTP Strict Transport Security)의 개념과 Spring Security의 HSTS 설정 방법 그리고 Nginx + Tomcat의 환경에서 HSTS 설정중 겪은 이슈에 대해 알아봅니다."/><meta data-react-helmet="true" property="og:site_name" content="DevDave"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정"/><meta data-react-helmet="true" property="og:description" content="HSTS(HTTP Strict Transport Security)의 개념과 Spring Security의 HSTS 설정 방법 그리고 Nginx + Tomcat의 환경에서 HSTS 설정중 겪은 이슈에 대해 알아봅니다."/><meta data-react-helmet="true" property="og:url" content="https://luckydavekim.github.io/development/back-end/spring-security/what-is-the-hsts"/><meta data-react-helmet="true" property="og:image" content="https://luckydavekim.github.io/static/8ad0a5528beee862a333b596370c8396/ec6c5/cover.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2020-11-19T08:30:21.000Z"/><meta data-react-helmet="true" property="article:tag" content="spring_security"/><meta data-react-helmet="true" property="article:tag" content="hsts"/><meta data-react-helmet="true" property="article:tag" content="http_strict_transport_security"/><meta data-react-helmet="true" property="article:tag" content="nginx"/><meta data-react-helmet="true" property="article:tag" content="tomcat"/><meta data-react-helmet="true" property="article:tag" content="ssl"/><meta data-react-helmet="true" property="article:tag" content="secure_socket_layer"/><meta data-react-helmet="true" property="article:publisher" content="https://www.facebook.com/lucky.dave.k"/><meta data-react-helmet="true" property="article:author" content="https://www.facebook.com/lucky.dave.k"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정"/><meta data-react-helmet="true" name="twitter:description" content="HSTS(HTTP Strict Transport Security)의 개념과 Spring Security의 HSTS 설정 방법 그리고 Nginx + Tomcat의 환경에서 HSTS 설정중 겪은 이슈에 대해 알아봅니다."/><meta data-react-helmet="true" name="twitter:url" content="https://luckydavekim.github.io/development/back-end/spring-security/what-is-the-hsts"/><meta data-react-helmet="true" name="twitter:image" content="https://luckydavekim.github.io/static/8ad0a5528beee862a333b596370c8396/ec6c5/cover.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" property="og:image:width" content="1280"/><meta data-react-helmet="true" property="og:image:height" content="719.8279569892474"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-109095118-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-109095118-1', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><link as="script" rel="preload" href="/webpack-runtime-5f6a65546e93d4ec86a1.js"/><link as="script" rel="preload" href="/framework-6d7c1fde620d33eccee3.js"/><link as="script" rel="preload" href="/app-b939667cd89e4ea64288.js"/><link as="script" rel="preload" href="/29107295-912382cc06864553c8c4.js"/><link as="script" rel="preload" href="/commons-06e5c8e3f2c45ae7539f.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-846c8121954b38de6c43.js"/><link as="fetch" rel="preload" href="/page-data/development/back-end/spring-security/what-is-the-hsts/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/138661842.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4089446364.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion-css="588etc">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0);}body{overflow-x:hidden;color:#303a3e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;line-height:1.6em;font-weight:400;font-style:normal;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}::selection{text-shadow:none;background:#cbeafb;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:600;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5.5rem;font-weight:600;}@media (max-width:500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2.2rem;}@media (max-width:500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width:500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#fff;}@media (prefers-color-scheme:dark){body{color:rgba(255,255,255,0.75);background:#191b1f;}img{opacity:0.9;}}</style><style data-emotion-css="1xh3phr">.css-1xh3phr .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme:dark){.css-1xh3phr .site-main{background:#191b1f;}}</style><style data-emotion-css="mmu3vk">.css-mmu3vk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-mmu3vk .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme:dark){.css-mmu3vk .site-main{background:#191b1f;}}</style><div class="css-mmu3vk evn7e2j0"><header class="site-header"><style data-emotion-css="ucagau">.css-ucagau{position:relative;padding:0 5vw;position:fixed;top:0;right:0;left:0;z-index:1000;background:#0a0b0c;}@media (max-width:700px){.css-ucagau{padding-right:0;padding-left:0;}}</style><div class="css-ucagau"><style data-emotion-css="s2cjas">.css-s2cjas{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-s2cjas"><style data-emotion-css="1y9ct7w">.css-1y9ct7w{position:relative;z-index:100;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:64px;font-size:1.3rem;}</style><nav class="css-1y9ct7w"><style data-emotion-css="1y1e201">.css-1y1e201{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding:10px 0 80px;font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-transform:uppercase;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width:700px){.css-1y1e201{margin-right:0;padding-left:5vw;}}</style><div class="site-nav-left css-1y1e201 edsnl3p0"><style data-emotion-css="3oagtl">.css-3oagtl{position:relative;z-index:100;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:inline-block;margin-right:32px;padding:12px 0;color:#fff;font-size:1.7rem;line-height:1.8rem;font-weight:bold;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;text-transform:none;}.css-3oagtl:hover{-webkit-text-decoration:none;text-decoration:none;}.css-3oagtl img{display:block;width:auto;height:21px;}</style><a class="site-nav-logo css-3oagtl" href="/">DevDave</a><style data-emotion-css="93cbs4">.css-93cbs4{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;}</style><div class="css-93cbs4 edsnl3p1"><style data-emotion-css="1a10f2y">.css-1a10f2y{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19,1,0.22,1);transition:all 1s cubic-bezier(0.19,1,0.22,1);}.css-1a10f2y li{display:block;margin:0;padding:0;}.css-1a10f2y li a{position:relative;display:block;padding:12px 12px;color:#fff;opacity:0.8;-webkit-transition:opacity 0.35s ease-in-out;transition:opacity 0.35s ease-in-out;}.css-1a10f2y li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-1a10f2y li a:before{content:'';position:absolute;right:100%;bottom:8px;left:12px;height:1px;background:#fff;opacity:0.25;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-1a10f2y li a:hover:before{right:12px;opacity:0.5;}.css-1a10f2y li .active{opacity:1;}.css-1a10f2y li .active:before{right:12px;opacity:0.5;}</style><ul role="menu" class="css-1a10f2y"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/about">About</a></li><li role="menuitem"><a class="undefined active" href="/development">Development</a></li><li role="menuitem"><a href="/algorithm">Algorithm</a></li><li role="menuitem"><a href="/tags">Tags</a></li></ul><style data-emotion-css="1h9xxnt">.css-1h9xxnt{visibility:hidden;position:absolute;top:9px;color:#fff;font-size:1.7rem;font-weight:400;text-transform:none;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19,1,0.22,1);transition:all 1s cubic-bezier(0.19,1,0.22,1);-webkit-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);}.css-1h9xxnt .dash{left:-25px;}.css-1h9xxnt .dash:before{content:'– ';opacity:0.5;}</style><span class="nav-post-title css-1h9xxnt edsnl3p5">HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정</span></div></div><style data-emotion-css="19n9jz8">.css-19n9jz8{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:10px 0;height:64px;}@media (max-width:700px){.css-19n9jz8{display:none;}}</style><div class="css-19n9jz8 edsnl3p2"><style data-emotion-css="1wee57o">.css-1wee57o{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1wee57o edsnl3p3"><style data-emotion-css="1wmzth6">.css-1wmzth6{display:inline-block;margin:0;padding:10px;opacity:0.8;}.css-1wmzth6:hover{opacity:1;}.css-1wmzth6 svg{height:1.8rem;fill:#fff;}.css-1wmzth6 svg{height:1.6rem;}</style><a href="https://github.com/luckyDaveKim" target="_blank" title="GitHub" rel="noopener noreferrer" class="css-1wmzth6"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://www.linkedin.com/in/%EB%AF%BC%EA%B7%9C-%EA%B9%80-88890818b" target="_blank" title="LinkedIn" rel="noopener noreferrer" class="css-1wmzth6"><svg role="img" viewBox="0 0 504.4 504.4" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn icon</title><path d="M377.6,0.2H126.4C56.8,0.2,0,57,0,126.6v251.6c0,69.2,56.8,126,126.4,126H378c69.6,0,126.4-56.8,126.4-126.4V126.6 C504,57,447.2,0.2,377.6,0.2z M168,408.2H96v-208h72V408.2z M131.6,168.2c-20.4,0-36.8-16.4-36.8-36.8c0-20.4,16.4-36.8,36.8-36.8 c20.4,0,36.8,16.4,36.8,36.8C168,151.8,151.6,168.2,131.6,168.2z M408.4,408.2H408h-60V307.4c0-24.4-3.2-55.6-36.4-55.6 c-34,0-39.6,26.4-39.6,54v102.4h-60v-208h56v28h1.6c8.8-16,29.2-28.4,61.2-28.4c66,0,77.6,38,77.6,94.4V408.2z"></path></svg></a><a href="https://www.facebook.com/lucky.dave.k" target="_blank" title="Facebook" rel="noopener noreferrer" class="css-1wmzth6"><svg role="img" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>Facebook icon</title><path d="M16 0c8.837 0 16 7.163 16 16s-7.163 16-16 16S0 24.837 0 16 7.163 0 16 0zm5.204 4.911h-3.546c-2.103 0-4.443.885-4.443 3.934.01 1.062 0 2.08 0 3.225h-2.433v3.872h2.509v11.147h4.61v-11.22h3.042l.275-3.81h-3.397s.007-1.695 0-2.187c0-1.205 1.253-1.136 1.329-1.136h2.054V4.911z"></path></svg></a><style data-emotion-css="y88inn">.css-y88inn{display:inline-block;margin:0;padding:10px;opacity:0.8;}.css-y88inn:hover{opacity:1;}.css-y88inn svg{height:1.8rem;fill:#fff;}.css-y88inn svg{height:2.2rem;}</style><a href="https://www.instagram.com/lucky.dave" target="_blank" title="Instagram" rel="noopener noreferrer" class="css-y88inn"><svg role="img" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><title>Instagram icon</title><path d="M 11.46875 5 C 7.917969 5 5 7.914063 5 11.46875 L 5 20.53125 C 5 24.082031 7.914063 27 11.46875 27 L 20.53125 27 C 24.082031 27 27 24.085938 27 20.53125 L 27 11.46875 C 27 7.917969 24.085938 5 20.53125 5 Z M 11.46875 7 L 20.53125 7 C 23.003906 7 25 8.996094 25 11.46875 L 25 20.53125 C 25 23.003906 23.003906 25 20.53125 25 L 11.46875 25 C 8.996094 25 7 23.003906 7 20.53125 L 7 11.46875 C 7 8.996094 8.996094 7 11.46875 7 Z M 21.90625 9.1875 C 21.402344 9.1875 21 9.589844 21 10.09375 C 21 10.597656 21.402344 11 21.90625 11 C 22.410156 11 22.8125 10.597656 22.8125 10.09375 C 22.8125 9.589844 22.410156 9.1875 21.90625 9.1875 Z M 16 10 C 12.699219 10 10 12.699219 10 16 C 10 19.300781 12.699219 22 16 22 C 19.300781 22 22 19.300781 22 16 C 22 12.699219 19.300781 10 16 10 Z M 16 12 C 18.222656 12 20 13.777344 20 16 C 20 18.222656 18.222656 20 16 20 C 13.777344 20 12 18.222656 12 16 C 12 13.777344 13.777344 12 16 12 Z"></path></svg></a></div></div></nav></div></div></header><style data-emotion-css="1jo00rp">.css-1jo00rp{z-index:100;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}@media (prefers-color-scheme:dark){.css-1jo00rp{background:#191b1f;}}</style><main id="site-main" class="site-main css-1jo00rp"><div class="css-s2cjas"><style data-emotion-css="vyvttm">.css-vyvttm{position:relative;z-index:50;}</style><article class="css-vyvttm"><style data-emotion-css="1855cdu">.css-1855cdu{position:relative;margin:0 auto;padding:70px 170px 50px;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width:1170px){.css-1855cdu{padding:60px 11vw 50px;}}@media (max-width:800px){.css-1855cdu{padding-right:5vw;padding-left:5vw;}}@media (max-width:500px){.css-1855cdu{padding:20px 0 35px;}}</style><header class="post-full-header css-1855cdu eu1fz7b0"><style data-emotion-css="1elnak4">.css-1elnak4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.2rem;font-weight:600;text-transform:uppercase;}.css-1elnak4 *{margin:0 0.3em;}</style><section class="post-full-tags css-1elnak4 eu1fz7b1"><a href="/tags/spring-security/">#<!-- -->spring_security</a><a href="/tags/hsts/">#<!-- -->hsts</a><a href="/tags/http-strict-transport-security/">#<!-- -->http_strict_transport_security</a><a href="/tags/nginx/">#<!-- -->nginx</a><a href="/tags/tomcat/">#<!-- -->tomcat</a><a href="/tags/ssl/">#<!-- -->ssl</a><a href="/tags/secure-socket-layer/">#<!-- -->secure_socket_layer</a></section><style data-emotion-css="83v1oh">.css-83v1oh{margin:0 0 0.2em;color:#0b0c0e;}@media (max-width:500px){.css-83v1oh{margin-top:0.2em;font-size:3.3rem;}}@media (prefers-color-scheme:dark){.css-83v1oh{color:rgba(255,255,255,0.9);}}</style><h1 class="post-full-title css-83v1oh eu1fz7b4">HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정</h1><style data-emotion-css="1grcjw1">.css-1grcjw1{margin:20px 0 0;color:var(--midgrey);font-family:Georgia,serif;font-size:2.3rem;line-height:1.4em;font-weight:300;}@media (max-width:500px){.css-1grcjw1{font-size:1.9rem;line-height:1.5em;}}@media (prefers-color-scheme:dark){.css-1grcjw1{color:#90a2aa;}}</style><p class="post-full-custom-excerpt css-1grcjw1 eu1fz7b2">HSTS(HTTP Strict Transport Security)의 개념과 Spring Security의 HSTS 설정 방법 그리고 Nginx + Tomcat의 환경에서 HSTS 설정중 겪은 이슈에 대해 알아봅니다.</p><style data-emotion-css="1g0h1pr">.css-1g0h1pr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid #e4eaed;}.css-1g0h1pr .post-full-byline-content{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-1g0h1pr .post-full-byline-meta{margin:2px 0 0;color:#90a2aa;font-size:1.2rem;line-height:1.2em;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-transform:uppercase;}.css-1g0h1pr .post-full-byline-meta h4{margin:0 0 3px;font-size:1.3rem;line-height:1.4em;font-weight:500;}.css-1g0h1pr .post-full-byline-meta h4 a{color:#2c3036;}.css-1g0h1pr .post-full-byline-meta h4 a:hover{color:#15171A;}.css-1g0h1pr .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}@media (prefers-color-scheme:dark){.css-1g0h1pr{border-top-color:#3b4049;}.css-1g0h1pr .post-full-byline-meta h4 a{color:rgba(255,255,255,0.75);}.css-1g0h1pr .post-full-byline-meta h4 a:hover{color:#fff;}}</style><div class="post-full-byline css-1g0h1pr eu1fz7b3"><section class="post-full-byline-content"><section class="post-full-byline-meta"><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2020-11-19">2020년 11월 19일</time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->5<!-- --> min read</span></div></section></section></div></header><style data-emotion-css="qy9dja">.css-qy9dja{margin:0 -10vw -165px;height:800px;background:#c5d2d9 center center;background-size:cover;border-radius:5px;}@media (max-width:1170px){.css-qy9dja{margin:0 -4vw -100px;border-radius:0;}.css-qy9dja img{max-width:1170px;}}@media (max-width:800px){.css-qy9dja{height:400px;}}@media (max-width:500px){.css-qy9dja{margin-bottom:4vw;height:350px;}}</style><figure class="css-qy9dja eu1fz7b5"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:56.236559139784944%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwUA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAwL/2gAMAwEAAhADEAAAAZbFRQIeTSn/xAAaEAACAwEBAAAAAAAAAAAAAAABAgMRMQAy/9oACAEBAAEFAkFM0ZIo9Hr+Dv8A/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBAgP/2gAIAQMBAT8BtopGf//EABYRAQEBAAAAAAAAAAAAAAAAAAAREv/aAAgBAgEBPwHKP//EABsQAAEEAwAAAAAAAAAAAAAAAAEAESAhMoGR/9oACAEBAAY/AselWH3H/8QAHBAAAwABBQAAAAAAAAAAAAAAAAERYRAhMUFx/9oACAEBAAE/Idsh5gWKWzxGrodyO580v//aAAwDAQACAAMAAAAQG/8A/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhEf/aAAgBAwEBPxDC5sNL/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhMf/aAAgBAgEBPxDZ2Tf/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAxIVH/2gAIAQEAAT8QBACEomakXpQidPZlIw5zLZ93UfG77//Z" alt="HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/8ad0a5528beee862a333b596370c8396/2f037/cover.jpg 930w,
/static/8ad0a5528beee862a333b596370c8396/ec6c5/cover.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/8ad0a5528beee862a333b596370c8396/2f037/cover.jpg 930w,
/static/8ad0a5528beee862a333b596370c8396/ec6c5/cover.jpg 1280w" src="/static/8ad0a5528beee862a333b596370c8396/ec6c5/cover.jpg" alt="HSTS (HTTP Strict Transport Security) 개념과 Spring Security의 HSTS 설정 및 이슈 해결 과정" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion-css="1wg46ch">.css-1wg46ch{position:relative;margin:0 auto;padding:7vw 7vw;min-height:230px;font-family:Georgia,serif;font-size:2rem;line-height:1.6em;background:#fff;}@media (max-width:1170px){.css-1wg46ch{padding:6vw 6vw;}}@media (max-width:800px){.css-1wg46ch{padding:5vw 5vw;font-size:1.8rem;}}@media (max-width:500px){.css-1wg46ch{padding:0;}}@media (max-width:500px){.css-1wg46ch .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}.css-1wg46ch .no-image{padding-top:0;}.css-1wg46ch:before{content:'';position:absolute;top:15px;left:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg);}.css-1wg46ch:after{content:'';position:absolute;top:15px;right:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg);}.css-1wg46ch h1,.css-1wg46ch h2,.css-1wg46ch h3,.css-1wg46ch h4,.css-1wg46ch h5,.css-1wg46ch h6,.css-1wg46ch p,.css-1wg46ch ul,.css-1wg46ch ol,.css-1wg46ch dl,.css-1wg46ch pre,.css-1wg46ch blockquote,.css-1wg46ch .post-full-comments,.css-1wg46ch .footnotes{margin:0 0 1.5em 0;min-width:100%;}@media (max-width:500px){.css-1wg46ch p,.css-1wg46ch ul,.css-1wg46ch ol,.css-1wg46ch dl,.css-1wg46ch pre,.css-1wg46ch .post-full-comments,.css-1wg46ch .footnotes{margin-bottom:1.28em;}}.css-1wg46ch li{word-break:break-word;}.css-1wg46ch li p{margin:0;}.css-1wg46ch a{color:#15171A;word-break:break-word;box-shadow:#15171A 0 -1px 0 inset;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1wg46ch a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1wg46ch strong,.css-1wg46ch em{color:#0a0b0c;}.css-1wg46ch small{display:inline-block;line-height:1.6em;}.css-1wg46ch img,.css-1wg46ch video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width:1040px){.css-1wg46ch img,.css-1wg46ch video{width:100%;}}.css-1wg46ch img[src$='#full']{max-width:none;width:100vw;}.css-1wg46ch img + br + small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1wg46ch iframe{margin:0 auto !important;}.css-1wg46ch blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}@media (max-width:500px){.css-1wg46ch blockquote{padding:0 1.3em;}}.css-1wg46ch blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1wg46ch blockquote p:last-child{margin-bottom:0;}.css-1wg46ch code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400 !important;background:#e5eff5;border-radius:3px;}.css-1wg46ch p code{word-break:break-all;}.css-1wg46ch pre{overflow-x:auto;padding:20px;max-width:100%;color:#e5eff5;font-size:1.4rem;line-height:1.5em;border-radius:5px;}.css-1wg46ch pre::selection{color:#3b474d;}.css-1wg46ch pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1wg46ch pre code:not(span){color:inherit;}.css-1wg46ch .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-1wg46ch hr{margin:2em 0;}.css-1wg46ch hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1wg46ch hr + p{margin-top:1.2em;}.css-1wg46ch h1,.css-1wg46ch h2,.css-1wg46ch h3,.css-1wg46ch h4,.css-1wg46ch h5,.css-1wg46ch h6{color:#0a0b0c;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1wg46ch h1{margin:0.5em 0 0.4em;font-size:4.2rem;line-height:1.25em;font-weight:600;}.css-1wg46ch p + h1{margin-top:0.8em;}@media (max-width:800px){.css-1wg46ch h1{font-size:3.2rem;line-height:1.25em;}}.css-1wg46ch h2{margin:0.5em 0 0.4em;font-size:3.2rem;line-height:1.25em;font-weight:600;}.css-1wg46ch p + h2{margin-top:0.8em;}@media (max-width:800px){.css-1wg46ch h2{margin-bottom:0.3em;font-size:2.8rem;line-height:1.25em;}}.css-1wg46ch h3{margin:0.5em 0 0.2em;font-size:2.5rem;line-height:1.3em;font-weight:600;}.css-1wg46ch h2 + h3{margin-top:0.7em;}@media (max-width:800px){.css-1wg46ch h3{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1wg46ch h4{margin:0.5em 0 0.2em;font-size:2.5rem;font-weight:600;}.css-1wg46ch h2 + h4{margin-top:0.7em;}.css-1wg46ch h3 + h4{margin-top:0;}@media (max-width:800px){.css-1wg46ch h4{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1wg46ch h5{display:block;margin:0.5em 0;padding:0.4em 1em 0.9em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width:1180px){.css-1wg46ch h5{max-width:1060px;}}@media (max-width:800px){.css-1wg46ch h5{margin-bottom:1em;margin-left:1.3em;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}}.css-1wg46ch h6{margin:0.5em 0 0.2em 0;font-size:2rem;font-weight:700;}@media (max-width:800px){.css-1wg46ch h6{font-size:1.8rem;line-height:1.4em;}}.css-1wg46ch table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1wg46ch table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 0 center,radial-gradient(ellipse at right,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 100% center;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1wg46ch table td:first-of-type{background-image:linear-gradient( to right,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-size:20px 100%;background-repeat:no-repeat;}.css-1wg46ch table td:last-child{background-image:linear-gradient( to left,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat;}.css-1wg46ch table th{color:#15171A;font-size:1.2rem;font-weight:700;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1wg46ch table th,.css-1wg46ch table td{padding:6px 12px;border:#e1edf4 1px solid;}@media (prefers-color-scheme:dark){.css-1wg46ch{background:#191b1f;}.css-1wg46ch h1,.css-1wg46ch h2,.css-1wg46ch h3,.css-1wg46ch h4,.css-1wg46ch h6{color:rgba(255,255,255,0.9);}.css-1wg46ch a{color:#fff;box-shadow:inset 0 -1px 0 #fff;}.css-1wg46ch strong{color:#fff;}.css-1wg46ch em{color:#fff;}.css-1wg46ch code{color:#fff;background:#000;}.css-1wg46ch hr{border-top-color:#2b2f36;}.css-1wg46ch figcaption{color:rgba(255,255,255,0.6);}.css-1wg46ch table td:first-of-type{background-image:linear-gradient(to right,#191b1f 50%,#191b1f 100%);}.css-1wg46ch table td:last-child{background-image:linear-gradient(270deg,#191b1f 50%,rgba(25,27,31,0));}.css-1wg46ch table th{color:rgba(255,255,255,0.85);background-color:#2b2f36;}.css-1wg46ch table th,.css-1wg46ch table td{border:#2b2f36 1px solid;}.css-1wg46ch .kg-bookmark-container,.css-1wg46ch .kg-bookmark-container:hover{color:rgba(255,255,255,0.75);box-shadow:0 0 1px rgba(255,255,255,0.9);}}.css-1wg46ch code[class*='language-'],.css-1wg46ch pre[class*='language-']{color:white;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1wg46ch pre[class*='language-']{overflow:auto;}.css-1wg46ch pre[class*='language-']::-moz-selection{background:hsl(207,4%,16%);}.css-1wg46ch pre[class*='language-']::selection{background:hsl(207,4%,16%);}.css-1wg46ch pre[class*='language-']::-moz-selection,.css-1wg46ch pre[class*='language-']::-moz-selection{text-shadow:none;background:hsla(0,0%,100%,0.15);}.css-1wg46ch pre[class*='language-']::selection,.css-1wg46ch pre[class*='language-']::selection{text-shadow:none;background:hsla(0,0%,100%,0.15);}.css-1wg46ch *:not(pre) > code[class*='language-']{border-radius:0.3em;background:rgb(1,22,39);color:white;padding:0.15em 0.5em;white-space:normal;}.css-1wg46ch .token.attr-name{color:rgb(173,219,103);font-style:italic;}.css-1wg46ch .token.comment{color:rgb(128,147,147);}.css-1wg46ch .token.string,.css-1wg46ch .token.url{color:rgb(173,219,103);}.css-1wg46ch .token.variable{color:rgb(214,222,235);}.css-1wg46ch .token.number{color:rgb(247,140,108);}.css-1wg46ch .token.builtin,.css-1wg46ch .token.char,.css-1wg46ch .token.constant,.css-1wg46ch .token.function{color:rgb(130,170,255);}.css-1wg46ch .token.punctuation{color:rgb(199,146,234);}.css-1wg46ch .token.selector,.css-1wg46ch .token.doctype{color:rgb(199,146,234);font-style:'italic';}.css-1wg46ch .token.class-name{color:rgb(255,203,139);}.css-1wg46ch .token.tag,.css-1wg46ch .token.operator,.css-1wg46ch .token.keyword{color:#ffa7c4;}.css-1wg46ch .token.boolean{color:rgb(255,88,116);}.css-1wg46ch .token.property{color:rgb(128,203,196);}.css-1wg46ch .token.namespace{color:rgb(178,204,214);}.css-1wg46ch pre[data-line]{padding:1em 0 1em 3em;position:relative;}.css-1wg46ch .gatsby-highlight-code-line{background-color:hsla(207,95%,15%,1);display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid #ffa7c4;}.css-1wg46ch .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto;}.css-1wg46ch .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}</style><section class="post-full-content css-1wg46ch e16ggdks0"><div><h1>개요</h1>
<p> 이 포스팅에서는 HSTS(HTTP Strict Transport Security)의 개념에 대해 알아보고,
<a href="https://www.nginx.com">Nginx</a> + <a href="http://tomcat.apache.org">Tomcat</a>의 환경에서
<a href="https://spring.io/projects/spring-security">Spring Security</a>의 HSTS 설정중 겪은 이슈에 대해 공유하려 합니다.</p>
<h1>HSTS(HTTP Strict Transport Security)란 무엇인가?</h1>
<p> HSTS는 보안을 강화하기 위한 기술로, 웹 접속시 <a href="https://ko.wikipedia.org/wiki/HTTPS">HTTPS</a>(HTTP over Secure Socket Layer) 프로토콜을 사용하도록 강제하는 기능입니다.<br/>
브라우저의 요청에 대한 응답에 HSTS 헤더를 담아서 보내게 되면, 브라우저는 향후 일정 시간(max-age 옵션에 설정한 시간)동안 해당 도메인에 요청시 HTTPS 프로토콜을 사용하게 됩니다.  </p>
<blockquote>
<p>HSTS는 국제 인터넷 표준화 기구(IETF, Internet Engineering Task Force) 표준이며, <a href="https://tools.ietf.org/html/rfc6797">RFC-6797</a>로 세부내용이 기술되어 있습니다.</p>
</blockquote>
<h1>HSTS의 장점은 무엇인가?</h1>
<p> HTTPS 프로토콜을 강제하는 방법에서는 HSTS 사용 대신, HTTP 요청에 대해 HTTPS로 리다이렉트를 통해 처리하는 방법도 가능할텐데, HSTS를 사용하는 것의 장점은 무엇이 있을까요?<br/>
<strong>HSTS를 사용할 경우 클라이언트는 서버와 HTTP 프로토콜을 통한 통신을 원천적으로 진행하지 않는다는 장점이 있습니다.</strong><br/>
그렇다면, HTTPS 프로토콜을 강제하는 두가지 방법에 대해 비교를 통해 알아보도록 하겠습니다.</p>
<h2>리다이렉트를 통한 HTTPS 강제</h2>
<p>HTTP 프로토콜을 통한 요청시 서버에서 HTTPS 프로토콜로 리다이렉트를 하여, HTTPS로 통신하도록 강제하는 과정을 살펴보겠습니다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/089b33f77b0039c0fda390940aaa85c8/bbbf7/redirect-to-https.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:56.199999999999996%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+0lEQVQoz6WQW0+EMBCF+f9/SfZB44v7SAKJGixhSzAU2+0NptCLddG4rG6I8aQP0/Z8nelJwnVJKQHgVPpfDcn5xppxUtw592H3/mG/Rwgt9TYM06QGWGADY5reZFmmlVJH6mf42f8bttaeX3gzzKw1WlIIL7gjVIi6MLy3E4SvQZJlpL7vq6rK83weZDDKgdZvr46gWLcNfn58Go2tUHV/d4vxYdU5zlkUBcY4wkNXB9Z4imWLVFMGEEoKwY/RRghJd7uyLFcwYyweUco45x60BxVXMFqzPszQ4gOuY2x+HIeu64QQK/hamJ+fP2k77U1dPPQ3+F+dL/QOMtqBvkASt8UAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Redirect to https" title="Redirect to https" src="/static/089b33f77b0039c0fda390940aaa85c8/bbbf7/redirect-to-https.png" srcSet="/static/089b33f77b0039c0fda390940aaa85c8/0eb09/redirect-to-https.png 500w, /static/089b33f77b0039c0fda390940aaa85c8/1263b/redirect-to-https.png 1000w, /static/089b33f77b0039c0fda390940aaa85c8/bbbf7/redirect-to-https.png 1280w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<ol>
<li>클라이언트는 최초 HTTP로 접속을 시도합니다. 이때, 중간자가 암호화 되지 않은 패킷을 가로챕니다.</li>
<li>중간자는 가로챈 패킷을 바탕으로 서버와 통신을 합니다.</li>
<li>서버는 HTTP 프로토콜로 요청이 왔으므로, HTTPS로 리다이렉트 요청을 보냅니다.<br/>
(이제 중간자와 서버는 HTTPS 프로토콜을 통한 통신을 진행합니다.)</li>
<li>중간자는 클라이언트에게 HTTP로 요청에 대한 응답을 보냅니다.</li>
<li>클라이언트는 향후 지속적으로 HTTP로 요청을 보냅니다.</li>
<li>중간자는 향후 지속적으로 클라이언트의 HTTP 요청을 HTTPS로 변경하여 서버에 요청을 보냅니다.</li>
<li>서버는 HTTPS 요청에 대한 응답을 보냅니다.</li>
<li>중간자는 클라이언트에게 HTTP로 요청에 대한 응답을 보냅니다.</li>
</ol>
<p>위와 같이 HTTP 프로토콜을 HTTPS로 리다이렉트하여 통신 할 경우, 중간자(MITM, Man In The Middle) 공격 방식인 SSL Stripping 공격에 노출될 수 있습니다.</p>
<h2>HSTS를 통한 HTTPS 강제</h2>
<p>이번에는 HSTS 설정을 통해 HTTPS로 통신하도록 강제하는 과정을 살펴보겠습니다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/e36f2f7231dba64001361ffa61db840d/bbbf7/hsts.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:56.199999999999996%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1ElEQVQoz6VQywqDMBD0/7/JgwcP3tVQCqIHoRptoiatSXRjE6WgBWsfw5LsLjPMJM60D8aYEOINwVkPo+wVbwHA9FrrIAjSNF36Y7FQivcSwFKlVJ7nhWH4kfM4jvOtAWxz73t0Oq+pxt9w1imcZajrOssyFMeCFPxazCmG/FLOmmnJUpal7/t5nm+czSMRQmYbRVHV8KphmPLmDp0AehtMEa6Y1BhXrusmSbIRU0rNihDStq31saX181zKZhECY9x13Ua895mHcL5i6xk/iv9yfsEDZ9SFTapl/E4AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="HSTS" title="HSTS" src="/static/e36f2f7231dba64001361ffa61db840d/bbbf7/hsts.png" srcSet="/static/e36f2f7231dba64001361ffa61db840d/0eb09/hsts.png 500w, /static/e36f2f7231dba64001361ffa61db840d/1263b/hsts.png 1000w, /static/e36f2f7231dba64001361ffa61db840d/bbbf7/hsts.png 1280w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<ol>
<li>클라이언트는 최초 HTTP로 접속을 시도하였으나, 브라우저에서 HSTS 설정된 도메인임을 확인하고 서버로 HTTP 요청을 보내지 않습니다.</li>
<li>브라우저는 HTTPS로 서버에 요청합니다.<br/>
(중간자는 SSL로 암호화된 패킷을 도청할 수 없습니다.)</li>
<li>서버는 HTTPS 요청에 대한 응답을 보냅니다.</li>
</ol>
<p>위에서 비교를 통해 알아본 것과 같이, HSTS를 사용할 경우 원천적으로 서버와 HTTP 통신을 진행하지 않기 때문에 보안적 측면에서 좀 더 안전하다는 장점이 있습니다.<br/>
또한, IETF 표준이라는 점도 장점일 것입니다.</p>
<h1>HSTS 설정 방법 및 옵션에 대해 알아보자!</h1>
<p>이제 HSTS가 무엇인지 그리고 왜 사용하는지는 알았으니, HSTS 설정 방법 및 옵션에 대해 알아보겠습니다.<br/>
우선 HSTS 헤더의 예시와 옵션에 대해 살펴보겠습니다.<br/>
<code class="language-text">Strict-Transport-Security: max-age=31536000 ; includeSubdomains ; preload</code>  </p>
<h2>HSTS 옵션</h2>
<p>HSTS의 옵션은 위와 같이 3가지의 옵션을 갖고 있습니다. 각각의 옵션에 대해 자세히 알아보도록 하겠습니다.  </p>
<ul>
<li>max-age : 브라우저가 HSTS 정책을 적용할 기간(초)을 설정합니다.</li>
<li>includeSubdomains : 도메인(example.com)의 서브 도메인(api.example.com 등)에도 HSTS 설정을 적용합니다.</li>
<li>preload : 해당 도메인이 브라우저의 preload list에 추가되며, 브라우저에서는 HSTS 헤더가 없더라도 HTTP요청을 HTTPS로 강제 변환하여 전송하게 됩니다.</li>
</ul>
<h2>Spring Security HSTS 설정 방법</h2>
<p>Spring Security에서 HSTS 설정하는 방법은 XML 설정방법 및 Java Config를 통한 설정 방법이 있습니다.</p>
<h3>XML을 통한 설정 방법</h3>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>http</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>headers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hsts</span>
      <span class="token attr-name">max-age-seconds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>31536000<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">include-subdomains</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">preload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>headers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>http</span><span class="token punctuation">&gt;</span></span></code></pre></div>
<h3>Java Config를 통한 설정 방법</h3>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    http
      <span class="token comment">// ...</span>
      <span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">httpStrictTransportSecurity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">maxAgeInSeconds</span><span class="token punctuation">(</span><span class="token number">31536000</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">includeSubDomains</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h1>Nginx, Tomcat 환경에서 HSTS 사용중 겪은 이슈!</h1>
<p>이와 같은 HSTS 장점을 활용하기 위해, Nginx와 Tomcat환경에서 Spring Security를 통한 HSTS 설정을 하였는데,
클라이언트에서 확인해보니 응답(Response)헤더에 HSTS 설정이 누락되어 있던 이슈였습니다.<br/>
결론을 먼저 말씀 드리자면, Spring Security의 HSTS 설정은 HTTPS 요청시에만 응답헤더에 HSTS를 추가하며,
이를 해결하기 위해 Tomcat의 <code class="language-text">Connector</code> 설정에 <code class="language-text">scheme</code>, <code class="language-text">secure</code> 옵션을 추가하여 해결했습니다.  </p>
<h2>이슈의 배경과 원인</h2>
<p>간략하게 이슈의 원인과 해결방법은 위에 공유드린것과 같고, 이를 좀더 자세하게 살펴보자면 아래와 같습니다.<br/>
우선 기본적인 Nginx, Tomcat 환경에 대해 설명 드리겠습니다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1280px">
      <a class="gatsby-resp-image-link" href="/static/10ce0939ab0addd8d5695c304bfb0133/bbbf7/nginx-tomcat-architecture.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:56.199999999999996%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTElEQVQoz6VSO1LDQAz1/UgFXIRcgYoZPjUNDeEiQEHqFAHbhQNO4iT+7HrX+7N2jWxnMpBAwaDR2Pv2SU+yZK/5h3lfAWhpOHXW9tC5xlpE+HYddLZz535K1ga40LZLLrheE0EllArmuXhblItcFJXOuU5Lhew2GaUAQCm10zS1TZnCwzJJ0izDW9SsoeX7kJRpjGmTCSFRFE0mE4xDiJ1qcPMNeRjdoyHVXkLdONt1Z+KP99kyBdtVDsNwOp0Gvp9s8rJSRVmh+vnFzenJ8dlwKCveSFYVKT4loy/j8fPTYxAtUMnDbuM4FkLgAQsKDYxXqHh7NxoMji6vro0xjZGKl85ISgo/CDbr1WyZgfs+sJ0ZsBnTof9aUrpH9VPJmNL9Nx8arichsoKGiBrjcqa3znUH1YoqjPF++wHAOtwcjvTQsSay+3v+q30Csix2d4ZX/SIAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Nginx Tomcat Architecture" title="Nginx Tomcat Architecture" src="/static/10ce0939ab0addd8d5695c304bfb0133/bbbf7/nginx-tomcat-architecture.png" srcSet="/static/10ce0939ab0addd8d5695c304bfb0133/0eb09/nginx-tomcat-architecture.png 500w, /static/10ce0939ab0addd8d5695c304bfb0133/1263b/nginx-tomcat-architecture.png 1000w, /static/10ce0939ab0addd8d5695c304bfb0133/bbbf7/nginx-tomcat-architecture.png 1280w" sizes="(max-width: 1280px) 100vw, 1280px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<p>Nginx에서 SSL 설정을 하여 클라이언트와 Nginx는 HTTPS 통신을 하고, 리버스 프록시를 통해 Nginx와 Tomcat의 통신은 HTTP를 통해 진행하고 있었습니다.<br/>
즉, Tomcat의 입장에서는 모든 요청이 HTTP 요청으로 처리되고 있는 것입니다.
바로 여기서 문제가 발생했던 것인데요. <a href="https://docs.spring.io/spring-security/site/docs/5.0.x/reference/html/headers.html#headers-hsts">Spring Security의 HSTS 문서</a> 를 확인해보니
다음과 같이 <strong>HTTPS 요청에 대해서만 HSTS가 설정된다</strong>고 정의되어 있었습니다.  </p>
<blockquote>
<p>In accordance with RFC6797, the HSTS header is only injected into HTTPS responses. In order for the browser to acknowledge the header, the browser must first trust the CA that signed the SSL certificate used to make the connection (not just the SSL certificate).</p>
</blockquote>
<h2>이슈의 해결 방법</h2>
<p>이와 같은 이슈 해결을 위해 크게 두가지 방법을 생각해볼 수 있었습니다.</p>
<ol>
<li>SSL 처리를 Tomcat에서 처리하여, Tomcat에서 Request가 HTTPS 프로토콜로 요청되도록 설정</li>
<li>Tomcat의 <code class="language-text">Connector</code> 설정 변경을 통해 secure 환경으로 명시하기</li>
</ol>
<p>첫번째 방법은 Tomcat에서 SSL 처리 부하를 Nginx로 분산시키기 위한 노력이 물거품이 되고,
다양한 다른 서비스의 틀을 바꿔야 하는 등의 단점이 있었기 때문에, 두번째 방법을 통해 해결하기로 했습니다.  </p>
<p>Tomcat <code class="language-text">server.xml</code> 설정 파일의 <code class="language-text">Connector</code> 설정값에 다음과 같은 옵션을 추가하면 됩니다.  </p>
<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Server</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Service</span> <span class="token attr-name">...</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span>
      <span class="token attr-name">scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">secure</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">...</span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Service</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Server</span><span class="token punctuation">&gt;</span></span></code></pre></div>
<p><code class="language-text">scheme</code>, <code class="language-text">secure</code> 옵션에 대한 자세한 설명은 <a href="https://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Common_Attributes">Connector 옵션 문서</a> 에서 확인이 가능합니다.  </p>
<blockquote>
<p><code class="language-text">scheme</code> : Set this attribute to the name of the protocol you wish to have returned by calls to request.getScheme(). For example, you would set this attribute to “https” for an SSL Connector. The default value is “http”.</p>
</blockquote>
<blockquote>
<p><code class="language-text">secure</code> : Set this attribute to true if you wish to have calls to request.isSecure() to return true for requests received by this Connector. You would want this on an SSL Connector or a non SSL connector that is receiving data from a SSL accelerator, like a crypto card, an SSL appliance or even a webserver. The default value is false.</p>
</blockquote>
<p>여기서 <code class="language-text">secure</code> 설정을 통해 <code class="language-text">request.isSecure()</code>에 대한 반환 값이 <code class="language-text">true</code>가 되도록 설정하면,
Spring Security의 <code class="language-text">HstsHeaderWriter</code> 클래스의 <code class="language-text">SecureRequestMatcher.matches(HttpsServleetRequest request)</code> 메소드가 <code class="language-text">true</code>를 반환하게 되어
HTTPS 프로토콜 통신이 아니지만, HSTS 설정이 적용되게 됩니다.<br/>
아래는 <code class="language-text">matches</code> 메소드에서 <code class="language-text">request.isSecure()</code>를 사용하고, 이를 통해 <code class="language-text">writeHeaders</code> 메서드에서 HSTS 반영 여부를 결정하는 것을 확인할 수 있습니다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">HstsHeaderWriter</span> <span class="token keyword">implements</span> <span class="token class-name">HeaderWriter</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeHeaders</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletReqsponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>requestMatcher<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token function">containsHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Strict-Transport-Security&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Strict-Transport-Security&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hstsHeaderValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">SecureReqeustMatcher</span> <span class="token keyword">implements</span> <span class="token class-name">RequestMatcher</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SecureRequeestMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">isSecure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h1>줄이며…</h1>
<p>지금까지 HSTS에 대한 개념과, Spring Security에서 HSTS 설정 방법 그리고 Nginx와 Tomcat 환경에서 Spring Security를 통한 HSTS 적용중 겪었던 이슈를 정리해보았습니다.<br/>
혹시, 저와같은 이슈를 겪는 분들에게 작게나마 도움이 되면 좋겠습니다.</p></div></section><ins class="adsbygoogle " style="display:block;text-align:center" data-ad-client="ca-pub-7933583473323654" data-ad-slot="3598572309" data-ad-layout="in-article" data-ad-layout-key="" data-ad-format="fluid" data-full-width-responsive="true"></ins><div></div></article></div></main><style data-emotion-css="qbc2zj">.css-qbc2zj{position:relative;padding:0 5vw;}</style><style data-emotion-css="ylcvnr">.css-ylcvnr{position:relative;padding:0 5vw;}.css-ylcvnr .post-card{padding-bottom:0;border-bottom:none;}.css-ylcvnr .post-card-excerpt{display:none;}</style><aside class="read-next css-ylcvnr ezd6boo0"><div class="css-s2cjas"><style data-emotion-css="24uqkl">.css-24uqkl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;PostFeedRaise padding:60px 0 0 0;}</style><div class="read-next-feed css-24uqkl ezd6boo1"><style data-emotion-css="1uaqv59">.css-1uaqv59{position:relative;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;min-height:220px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;border-radius:5px;border-bottom:1px solid #eaeff1;background-color:#fff;background-size:cover;}.css-1uaqv59:hover .post-card-image{-webkit-transition:all 0.5s ease;transition:all 0.5s ease;-webkit-transform:translate3D(0,-1px,0) scale(1.1);-ms-transform:translate3D(0,-1px,0) scale(1.1);transform:translate3D(0,-1px,0) scale(1.1);}@media (prefers-color-scheme:dark){.css-1uaqv59{background-color:#15171A;border-bottom-color:#2b2f36;box-shadow:#23262b 8px 14px 38px,#1c1e22 1px 3px 8px;}}</style><article class="post-card  css-1uaqv59"><style data-emotion-css="1octql1">.css-1octql1{position:relative;display:block;overflow:hidden;}</style><a class="post-card-image-link css-1octql1" href="/development/back-end/java/strong-reference-in-java"><style data-emotion-css="1dfyoj0">.css-1dfyoj0{width:auto;height:200px;background:#c5d2d9 no-repeat center center;background-size:cover;-webkit-transition:all 0.5s ease;transition:all 0.5s ease;}</style><div class="post-card-image css-1dfyoj0 e1c3jrwf0"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:52.1505376344086%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHLWq1Ii8r/xAAaEAABBQEAAAAAAAAAAAAAAAABAgMQEiEx/9oACAEBAAEFArpIppyGOM6j/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIRAxUYH/2gAIAQEABj8CUrwhb4Xhln//xAAeEAACAgEFAQAAAAAAAAAAAAABEQAhYRAxQVFx4f/aAAgBAQABPyFWQgqV8jkNwGO0AkgRzoR8jWJkr5n/2gAMAwEAAgADAAAAEIzv/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAh/9oACAEDAQE/EHCf/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFB/9oACAECAQE/ENR//8QAHBABAAIDAAMAAAAAAAAAAAAAARExACFBEFFh/9oACAEBAAE/EG4UCJ/RvC+BHOlCcaxawLBD4Yiq9nRz1lzYMnbP/9k=" alt="Java Strongly Reachable, Strong Reference 란 cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/073a46ccfdc8b504382098cb7aaf7abf/2f037/cover.jpg 930w,
/static/073a46ccfdc8b504382098cb7aaf7abf/23f4e/cover.jpg 1860w,
/static/073a46ccfdc8b504382098cb7aaf7abf/d8255/cover.jpg 1920w" sizes="(max-width: 1920px) 100vw, 1920px" /><img loading="lazy" sizes="(max-width: 1920px) 100vw, 1920px" srcset="/static/073a46ccfdc8b504382098cb7aaf7abf/2f037/cover.jpg 930w,
/static/073a46ccfdc8b504382098cb7aaf7abf/23f4e/cover.jpg 1860w,
/static/073a46ccfdc8b504382098cb7aaf7abf/d8255/cover.jpg 1920w" src="/static/073a46ccfdc8b504382098cb7aaf7abf/d8255/cover.jpg" alt="Java Strongly Reachable, Strong Reference 란 cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion-css="2u1lp9">.css-2u1lp9{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="post-card-content css-2u1lp9 e1c3jrwf1"><style data-emotion-css="13pb3ux">.css-13pb3ux{position:relative;display:block;padding:0 25px 0;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:#15171A;}.css-13pb3ux:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-13pb3ux" href="/development/back-end/java/strong-reference-in-java"><style data-emotion-css="9htq4g">.css-9htq4g{margin:15px 0 0;}</style><header class="post-card-header css-9htq4g e1c3jrwf8"><style data-emotion-css="2imjyh">.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}</style><div class="css-2imjyh e1c3jrwf2"><style data-emotion-css="v10wvb">.css-v10wvb{line-height:1em;margin:0 0.3em;color:#3eb0ef;font-size:1.2rem;font-weight:500;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-transform:uppercase;}</style><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->java</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->strong_reference</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->strongly_reachable</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->reference</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->reachable</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->기술_면접_질문</span></div><style data-emotion-css="9rk8pj">.css-9rk8pj{margin:0 0 0.4em;line-height:1.15em;-webkit-transition:color 0.2s ease-in-out;transition:color 0.2s ease-in-out;}@media (prefers-color-scheme:dark){.css-9rk8pj{color:rgba(255,255,255,0.85);}}</style><h2 class="post-card-title css-9rk8pj e1c3jrwf4">Java Strongly Reachable, Strong Reference 란</h2></header><style data-emotion-css="qom4fj">.css-qom4fj{font-family:Georgia,serif;}@media (prefers-color-scheme:dark){.css-qom4fj{color:#90a2aa !important;}}</style><section class="post-card-excerpt css-qom4fj e1c3jrwf5"><p>Java의 Strongly Reachable 특징과 Strong Reference 사용 예시에 대해 알아봅니다.</p></section></a><style data-emotion-css="190i8t5">.css-190i8t5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0 25px 25px;}</style><footer class="post-card-meta css-190i8t5 e1c3jrwf6"><style data-emotion-css="5e8dcg">.css-5e8dcg{-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;color:#90a2aa;font-size:1.2rem;line-height:1.4em;font-weight:400;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-transform:uppercase;}.css-5e8dcg *{margin-left:auto;}@media (prefers-color-scheme:dark){.css-5e8dcg a{color:rgba(255,255,255,0.75);}}</style><div class="post-card-byline-content css-5e8dcg e1c3jrwf7"><span>2<!-- --> min read</span><time dateTime="2020-12-01">2020년 12월 1일</time></div></footer></div></article><article class="post-card  css-1uaqv59"><a class="post-card-image-link css-1octql1" href="/development/back-end/java/what-is-the-access-modifier"><div class="post-card-image css-1dfyoj0 e1c3jrwf0"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:51.93548387096774%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAADAv/aAAwDAQACEAMQAAABz4UqhvCwkf/EABkQAQACAwAAAAAAAAAAAAAAAAEAEQIQMv/aAAgBAQABBQJSrxp0dT//xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAEDAQE/AUoZP//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwFulP/EABkQAAIDAQAAAAAAAAAAAAAAAAABIDFBYf/aAAgBAQAGPwJI7hcP/8QAGxAAAwACAwAAAAAAAAAAAAAAAAERITFBUXH/2gAIAQEAAT8hqzteaRarvCGrra+j4NA9n//aAAwDAQACAAMAAAAQVN//xAAWEQEBAQAAAAAAAAAAAAAAAAAAEXH/2gAIAQMBAT8Qkaf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEVH/2gAIAQIBAT8QsRj/xAAbEAEAAwEAAwAAAAAAAAAAAAABABFBMSFRYf/aAAgBAQABPxBfQIK/FRJnUFJqvfyAAiBTDG7xjemxup//2Q==" alt="Java 접근 제어자 (Access Modifier) cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/76f8fc3f5ed12231fb19c9ed51ac593c/2f037/cover.jpg 930w,
/static/76f8fc3f5ed12231fb19c9ed51ac593c/f86e2/cover.jpg 1540w" sizes="(max-width: 1540px) 100vw, 1540px" /><img loading="lazy" sizes="(max-width: 1540px) 100vw, 1540px" srcset="/static/76f8fc3f5ed12231fb19c9ed51ac593c/2f037/cover.jpg 930w,
/static/76f8fc3f5ed12231fb19c9ed51ac593c/f86e2/cover.jpg 1540w" src="/static/76f8fc3f5ed12231fb19c9ed51ac593c/f86e2/cover.jpg" alt="Java 접근 제어자 (Access Modifier) cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-2u1lp9 e1c3jrwf1"><a class="post-card-content-link css-13pb3ux" href="/development/back-end/java/what-is-the-access-modifier"><header class="post-card-header css-9htq4g e1c3jrwf8"><div class="css-2imjyh e1c3jrwf2"><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->java</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->access_modifier</span><span class="post-card-primary-tag css-v10wvb e1c3jrwf3">#<!-- -->interview</span></div><h2 class="post-card-title css-9rk8pj e1c3jrwf4">Java 접근 제어자 (Access Modifier)</h2></header><section class="post-card-excerpt css-qom4fj e1c3jrwf5"><p>Java의 접근 제어자(Access Modifier)의 종류 및 차이에 대해 알아봅니다.</p></section></a><footer class="post-card-meta css-190i8t5 e1c3jrwf6"><div class="post-card-byline-content css-5e8dcg e1c3jrwf7"><span>6<!-- --> min read</span><time dateTime="2020-11-18">2020년 11월 18일</time></div></footer></div></article></div></div></aside><style data-emotion-css="1r6rbav">.css-1r6rbav{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-1r6rbav"><style data-emotion-css="t78pr">.css-t78pr{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255,255,255,0.7);font-size:1.3rem;}.css-t78pr a{color:rgba(255,255,255,0.7);}.css-t78pr a:hover{color:rgba(255,255,255,1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width:650px){.css-t78pr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-t78pr"><section class="copyright"><a href="/">DevDave</a> © <!-- -->2020<!-- --> | DevDave blog is proudly published with Gatsby &amp; GitHub Pages</section><style data-emotion-css="gzvysf">.css-gzvysf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-gzvysf a{position:relative;margin-left:20px;}.css-gzvysf a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-gzvysf a:first-of-type:before{display:none;}@media (max-width:650px){.css-gzvysf a:first-of-type{margin-left:0;}}</style><nav class="css-gzvysf ea46bro0"><a href="/">Latest Posts</a><a href="https://github.com/luckyDaveKim" target="_blank" rel="noopener noreferrer">GitHub</a><a href="https://www.linkedin.com/in/%EB%AF%BC%EA%B7%9C-%EA%B9%80-88890818b" target="_blank" rel="noopener noreferrer">LinkedIn</a><a href="https://www.facebook.com/lucky.dave.k" target="_blank" rel="noopener noreferrer">Facebook</a><a href="https://www.instagram.com/lucky.dave" target="_blank" rel="noopener noreferrer">Instagram</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/development/back-end/spring-security/what-is-the-hsts";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1b96e3e9a836bf9acb10.js"],"app":["/app-b939667cd89e4ea64288.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-e08f1f7e696bd1d0c98b.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-eb158e3fef99b28e3897.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-3ac94384a87d81603366.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-ed9735012601d6b025e5.js"],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-bac1a849ce0f605dafca.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-846c8121954b38de6c43.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-53ea1a0887c8f548a5e9.js"]};/*]]>*/</script><script src="/polyfill-1b96e3e9a836bf9acb10.js" nomodule=""></script><script src="/component---src-templates-post-tsx-846c8121954b38de6c43.js" async=""></script><script src="/commons-06e5c8e3f2c45ae7539f.js" async=""></script><script src="/29107295-912382cc06864553c8c4.js" async=""></script><script src="/app-b939667cd89e4ea64288.js" async=""></script><script src="/framework-6d7c1fde620d33eccee3.js" async=""></script><script src="/webpack-runtime-5f6a65546e93d4ec86a1.js" async=""></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></body></html>